{% extends 'AppBundle:Design:design.html.twig' %}

{% block content %}
    <div class="container">
        <center>
        	<h2>{{ "quiz_result"|trans }}</h2>
		</center>
		
		<h4 class="main-color">{{ "quiz_categories_selected"|trans }}</h4>
		
		<div class="row">
    		{% for quizCategory in quizCategories %}
    			<div class="col-sm-6 col-md-4">
    				<center>
    					<img src="{{ asset("upload/img/quiz/"~quizCategory.name~".svg") }}" id="icon_{{ quizCategory.name }}" style="height: 50px;" data-toggle="popover" data-trigger="focus" data-placement="top" data-content="{{ quizCategory.name|trans }}"/>
    					<h5>{{ (quizCategory.name~"_hint")|trans }}</h5>
    				</center>
    			</div>
    		{% endfor %}
		</div>
		
		<h4 class="main-color">{{ "associations_finded"|trans }}</h4>
		
		{% if associations|length == 0 %}
			<p>
				{{ "no_association_finded"|trans }}
			</p>
		{% endif %}
		
		<p>
			{% for association in associations %}
				<div class="media">
					<div class="media-left">
						<a href="{{ url("app_association", {"id": association.id, "name": association.nameForUrl}) }}">
							<img class="media-object" src="{{ asset(association.picturePath) }}" style="height: 50px;">
						</a>
					</div>
					<div class="media-body">
						<h4 class="media-heading"><a href="{{ url("app_association", {"id": association.id, "name": association.nameForUrl}) }}">{{ association.name }}</a></h4>
						{% for score in association.quizScores %}
							{% if score.quizCategory.name in quizCategoriesNames %}
    							<img src="{{ asset("upload/img/quiz/"~score.quizCategory.name~".svg") }}" style="height: 25px;" id="icon_{{ score.id }}" data-toggle="popover" data-trigger="focus" data-placement="top" data-content="
    							{% if score.score == 2 %}
    								{{ "score_exactly"|trans }}
    							{% elseif score.score == 1 %}
    								{{ "score_moderately"|trans }}
    							{% else %}
    								{{ "score_vaguely"|trans }}
    							{% endif %}
    							"/>
							{% endif %}
						{% endfor %}
					</div>
				</div>
			{% endfor %}
		</p>
		
		<center>
			<a class="btn btn-success btn-lg" role="button" href="{{ url("app_quiz") }}">{{ "quiz_return"|trans }}</a>
		</center>
    </div>
{% endblock %}

{% block js %}
<script type="text/javascript">
    {% for association in associations %}

        {% for score in association.quizScores %}
    		$("#icon_{{ score.id }}").mouseover(function() {
    			$("#icon_{{ score.id }}").popover('show')
        	});
        
    		$("#icon_{{ score.id }}").mouseout(function() {
    			$("#icon_{{ score.id }}").popover('hide')
        	});
    	{% endfor %}
    {% endfor %}

    {% for quizCategory in quizCategories %}
    	
		$("#icon_{{ quizCategory.name }}").mouseover(function() {
			$("#icon_{{ quizCategory.name }}").popover('show')
    	});
    
		$("#icon_{{ quizCategory.name }}").mouseout(function() {
			$("#icon_{{ quizCategory.name }}").popover('hide')
    	});
    {% endfor %}
</script>
{% endblock %}

